<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZuckCannon</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="app.css" />
  <link rel="icon" type="image/x-icon" href="icons/favi.png">

</head>

<body>
  <header>
    <h1>ZuckCannon <span class="h1-version">v1.0</span>
      <button class="refresh-data-btn" title="Refresh data from Facebook">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M23 4v6h-6"></path>
          <path d="M1 20v-6h6"></path>
          <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
        </svg>
      </button>
      <button class="rules-btn" title="Automated Rules">
        <p>Manage Rules</p>
      </button>
    </h1>
    <div class="header-controls">
      <span id="username-display"></span>
      <button id="logout-btn" class="logout-btn">Logout</button>
    </div>
  </header>

  <!-- Not authenticated message -->
  <div id="auth-message" class="auth-message" style="display: none;">
    <p>Not authenticated. <a href="/login.html">Please login to view data.</a></p>
  </div>

  <div class="main-container" id="main-container">
    <!-- Column 1 - Ad Account -->
    <aside id="col-1" class="ad-acc-column">
      <h2>Select Ad Account</h2>
      <ul id="ad-acc-list"></ul>
    </aside>

    <!-- Column 2 - Campaign -->
    <div id="col-2" class="campaign-column" style="display: none">
      <div class="campaign-title-wrapper">
        <h2>Select Campaign</h2>
        <a href="#" class="search-icon-btn"><img src="icons/search-icon.svg" alt="Search" /></a>
      </div>
      <button class="create-new-campaign-btn">+ Create New Campaign</button>
    </div>

    <!-- Column 2.5 - Campaign Creation -->
    <div id="col-2-5" class="campaign-creation-column" style="display: none">
      <h2>Create New Campaign</h2>
      <div class="campaign-form-container">
        <input type="text" placeholder="Campaign Name*" class="config-campaign-name" required />

        <!-- Objective dropdown -->
        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-objective">
              <span class="dropdown-display placeholder" placeholder="Campaign Objective*">Campaign Objective*</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-objective">
              <li data-value="OUTCOME_TRAFFIC">Traffic</li>
              <li data-value="OUTCOME_ENGAGEMENT">Engagement</li>
              <li data-value="OUTCOME_LEADS">Leads</li>
              <li data-value="OUTCOME_SALES">Sales</li>
              <li data-value="OUTCOME_APP_PROMOTION">App Promotion</li>
              <li data-value="OUTCOME_AWARENESS">Awareness</li>
            </ul>
          </div>
        </div>

        <!-- Status dropdown -->
        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-status">
              <span class="dropdown-display placeholder" placeholder="Status*">Status*</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-status">
              <li data-value="PAUSED">Paused</li>
              <li data-value="ACTIVE">Active</li>
            </ul>
          </div>
        </div>

        <!-- Budget Options - MOVED TO AD SET LEVEL -->
        <!-- <input type="number" placeholder="Daily Budget (Optional, e.g., 50 for $50)"
          class="config-campaign-daily-budget" step="0.01" min="0" />
        <input type="number" placeholder="Lifetime Budget (Optional, e.g., 1000 for $1000)"
          class="config-campaign-lifetime-budget" step="0.01" min="0" /> -->

        <!-- Bid Strategy dropdown - MOVED TO AD SET LEVEL -->
        <!-- <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-bid-strategy">
              <span class="dropdown-display placeholder" placeholder="Bid Strategy (Optional)">Bid Strategy
                (Optional)</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-bid-strategy">
              <li data-value="">None</li>
              <li data-value="LOWEST_COST_WITHOUT_CAP">Lowest Cost Without Cap</li>
              <li data-value="LOWEST_COST_WITH_BID_CAP">Lowest Cost With Bid Cap</li>
              <li data-value="COST_CAP">Cost Cap</li>
              <li data-value="LOWEST_COST_WITH_MIN_ROAS">Lowest Cost With Min ROAS</li>
            </ul>
          </div>
        </div> -->

        <!-- Special Categories dropdown -->
        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-special-categories">
              <span class="dropdown-display placeholder" placeholder="Special Ad Categories (Optional)">Special Ad
                Categories (Optional)</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-special-categories" data-multiple="true">
              <li data-value="">None - If none of the categories apply</li>
              <li data-value="EMPLOYMENT">Employment</li>
              <li data-value="HOUSING">Housing</li>
              <li data-value="FINANCIAL_PRODUCTS_SERVICES">Financial Products & Services</li>
              <li data-value="ISSUES_ELECTIONS_POLITICS">Issues, Elections, Politics</li>
              <li data-value="ONLINE_GAMBLING_AND_GAMING">Online Gambling & Gaming</li>
            </ul>
          </div>
        </div>

        <!-- Special Ad Category Country dropdown -->
        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-special-country">
              <span class="dropdown-display placeholder" placeholder="Special Ad Category Country (Optional)">Special Ad
                Category Country (Optional)</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-special-country" data-multiple="true">
              <li data-value="">None</li>
              <!-- Countries will be populated dynamically from fb-locations.json -->
            </ul>
          </div>
        </div>

        <button class="campaign-create-btn">Create Campaign</button>
        <button class="campaign-cancel-btn">Cancel</button>
      </div>
    </div>

    <!-- Column 3 - Action -->
    <!-- <div id="col-3" class="action-column" style="display: none;"> -->
    <div id="col-3" class="action-column" style="display: none">
      <h2>Select Action</h2>
      <ul>
        <li class="action" data-next-column="" data-col-id="3" data-action-type="duplicate-campaign">
          Duplicate <strong>Campaign</strong></li>
        <li class="action" data-next-column=".upload-column" data-col-id="3" data-action-type="create-new">
          Create New <strong>Ad Set</strong>
        </li>
        <li class="action" data-next-column=".upload-column" data-col-id="3" data-action-type="upload-existing">Upload
          to Existing <strong>Ad Set</strong>
        <li class="action" data-next-column=".upload-column" data-col-id="3" data-action-type="duplicate-existing">
          Duplicate Existing <strong>Ad Set</strong></li>
      </ul>
    </div>
    <!-- Upload Column -->
    <!-- <div id="col-4" class="upload-column" style="display: none;"> -->
    <div id="col-4" class="upload-column" style="display: none">
      <!-- Ad Set List (for existing ad set selection) -->
      <div class="adset-list-container" style="display: none;">
        <h3>Select Ad Set</h3>
        <div class="adset-list">
          <!-- Ad sets will be populated here -->
        </div>
      </div>

      <!-- Ad Set Configuration -->
      <div class="adset-config">
        <h2>Ad Set Configuration</h2>
        <div class="adset-form-container">
          <input type="text" value="Campaign Id" class="preselect config-campaign-id" readonly />
          <input type="text" value="WEBSITE" class="preselect config-destination-type" readonly
            style="display: none;" />
          <input type="text" value="OFFSITE_CONVERSIONS" class="preselect config-optimization-goal" readonly />
          <input type="text" value="IMPRESSIONS" class="preselect config-billing-event" readonly
            style="display: none;" />
          <input type="text" value="LOWEST_COST_WITHOUT_CAP" class="preselect config-bid-strategy" readonly
            style="display: none;" />
          <input type="text" placeholder="Ad Set Name*" data-container="adset-form-container" class="config-adset-name"
            required />

          <!-- Status dropdown -->
          <div class="dropdown-container">
            <div class="custom-dropdown">
              <div class="dropdown-selected" data-dropdown="status">
                <span class="dropdown-display">Status*</span>
                <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                  <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </div>
              <ul class="dropdown-options status">
                <li class="status-option" data-value="ACTIVE">ACTIVE</li>
                <li class="status-option" data-value="PAUSED">PAUSED</li>
              </ul>
            </div>
          </div>

          <!-- Pixel dropdown -->
          <div class="dropdown-container">
            <div class="custom-dropdown">
              <div class="dropdown-selected" data-dropdown="pixel">
                <span class="dropdown-display placeholder">Pixel</span>
                <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                  <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </div>
              <ul class="dropdown-options pixel"></ul>
            </div>
          </div>

          <!-- Custom Event Type Selection -->
          <div class="event-type-container" style="opacity: 1;">
            <input type="text" placeholder="Custom Event Type" data-container="adset-form-container"
              class="config-event-type" readonly>
            <input type="text" placeholder="Type to search events..." class="event-type-search" style="display: none;">
            <ul class="event-type-suggestions" style="display: none;"></ul>
          </div>

          <!-- Budget & Schedule Section -->
          <div class="budget-schedule-section"
            style="margin-top: 15px; padding: 15px; border: 1px solid #ddd; border-radius: 4px; background: #f9f9f9;">
            <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #333;">Budget & Schedule</h3>

            <!-- Budget Type dropdown -->
            <div class="dropdown-container">
              <div class="custom-dropdown">
                <div class="dropdown-selected" data-dropdown="adset-budget-type">
                  <span class="dropdown-display placeholder" placeholder="Budget Type*">Budget Type*</span>
                  <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                    <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                      stroke-linejoin="round" />
                  </svg>
                </div>
                <ul class="dropdown-options adset-budget-type">
                  <li data-value="daily">Daily Budget</li>
                  <li data-value="lifetime">Lifetime Budget</li>
                </ul>
              </div>
            </div>

            <!-- Budget Amount Input -->
            <div class="budget-input-wrapper" style="margin-top: 4px;">
              <span class="currency-prefix">$</span>
              <input type="number" placeholder="Enter budget amount*" data-container="adset-form-container"
                class="config-adset-budget" step="0.01" min="1" required />
              <span class="budget-type-suffix"></span>
            </div>

            <!-- Start Date & Time -->
            <div style="margin-top: 10px;">
              <label style="display: block; font-size: 13px; color: #666; margin-bottom: 4px;">Start Date &
                Time*</label>
              <input type="datetime-local" class="config-start-datetime" data-container="adset-form-container"
                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" required />
            </div>

            <!-- End Date & Time -->
            <div style="margin-top: 10px;">
              <label style="display: block; font-size: 13px; color: #666; margin-bottom: 4px;">
                End Date & Time<span class="end-date-required-indicator" style="color: #dc3545; display: none;">*</span>
                <span class="end-date-optional-indicator" style="color: #999;"> (Optional for Daily Budget)</span>
              </label>
              <input type="datetime-local" class="config-end-datetime" data-container="adset-form-container"
                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
              <small style="display: block; margin-top: 4px; color: #666; font-size: 12px;">
                Leave empty for ongoing campaign (Daily Budget only)
              </small>
            </div>
          </div>

          <!-- Bid Strategy Section  -->
          <div class="bid-strategy-section" style="margin-top: 15px;">
            <div class="dropdown-container">
              <div class="custom-dropdown">
                <div class="dropdown-selected" data-dropdown="adset-bid-strategy">
                  <span class="dropdown-display" data-value="LOWEST_COST_WITHOUT_CAP">Lowest Cost Without Cap</span>
                  <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                    <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                      stroke-linejoin="round" />
                  </svg>
                </div>
                <ul class="dropdown-options adset-bid-strategy">
                  <li data-value="LOWEST_COST_WITHOUT_CAP">Lowest Cost Without Cap</li>
                  <li data-value="LOWEST_COST_WITH_BID_CAP">Lowest Cost With Bid Cap</li>
                  <li data-value="COST_CAP">Cost Cap</li>
                  <li data-value="LOWEST_COST_WITH_MIN_ROAS">Lowest Cost With Min ROAS</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="budget-input-wrapper cost-per-result">
            <span class="currency-prefix">$</span>
            <input type="number" placeholder="12.50" data-container="adset-form-container"
              class="config-cost-per-result-goal" step="0.01" min="0" />
            <span class="currency-suffix">per result</span>
          </div>

          <div class="targeting-age">
            <input type="number" placeholder="Min Age*" class="min-age" data-container="adset-form-container"
              required />
            <input type="number" placeholder="Max Age*" class="max-age" data-container="adset-form-container"
              required />
          </div>
          <!-- Country Selection -->
          <div class="geo-selection-container">
            <div class="country-selection">
              <div class="selected-countries-container">
                <div class="selected-tags" id="selected-countries"></div>
                <input type="text" placeholder="Search countries (please match with campaign)*"
                  class="country-search-input" data-container="adset-form-container" />
              </div>
              <ul class="country-suggestions" style="display: none;"></ul>
            </div>
          </div>

          <!-- Region Selection -->
          <div class="geo-selection-container">
            <div class="region-selection">
              <div class="selected-regions-container">
                <div class="selected-tags" id="selected-regions"></div>
                <input type="text" placeholder="Search regions" class="region-search-input"
                  data-container="adset-form-container" />
              </div>
              <ul class="region-suggestions" style="display: none;"></ul>
            </div>
          </div>

          <!-- Ad Scheduling Section -->
          <div class="ad-scheduling-container"
            style="margin-top: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 4px; background: #f9f9f9;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
              <h3 style="margin: 0; font-size: 16px; color: #333;">Ad Scheduling (Optional)</h3>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" class="enable-scheduling-checkbox" style="cursor: pointer;">
                <span style="font-size: 14px; color: #666;">Enable Scheduling</span>
              </label>
            </div>
            <p style="margin: 8px 0; font-size: 13px; color: #666;">Schedule specific days and hours when your ads
              should run.</p>

            <div class="scheduling-controls" style="display: none;">
              <!-- Schedule List -->
              <div class="schedule-list" style="margin-top: 15px;">
                <!-- Schedule items will be added here -->
              </div>

              <!-- Add Schedule Button -->
              <button type="button" class="add-schedule-btn"
                style="margin-top: 10px; padding: 8px 16px; background: #103dee; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
                + Add Schedule
              </button>

              <!-- Schedule Form Template (hidden) -->
              <div class="schedule-form-template" style="display: none;">
                <div class="schedule-item"
                  style="margin-top: 15px; padding: 15px; border: 1px solid #ddd; border-radius: 4px; background: white;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <strong style="font-size: 14px;">Schedule #<span class="schedule-number"></span></strong>
                    <button type="button" class="remove-schedule-btn"
                      style="padding: 4px 8px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">Remove</button>
                  </div>

                  <!-- Time Selection -->
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                    <div>
                      <label style="display: block; font-size: 13px; color: #666; margin-bottom: 4px;">Start Time
                        (HH:MM)</label>
                      <input type="time" class="schedule-start-time" required
                        style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div>
                      <label style="display: block; font-size: 13px; color: #666; margin-bottom: 4px;">End Time
                        (HH:MM)</label>
                      <input type="time" class="schedule-end-time" required
                        style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                  </div>

                  <!-- Days Selection -->
                  <div style="margin-bottom: 10px;">
                    <label style="display: block; font-size: 13px; color: #666; margin-bottom: 8px;">Active Days</label>
                    <div class="days-selector" style="display: flex; gap: 8px; flex-wrap: wrap;">
                      <label class="day-checkbox"
                        style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                        <input type="checkbox" value="0" style="cursor: pointer;"> Sun
                      </label>
                      <label class="day-checkbox"
                        style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                        <input type="checkbox" value="1" style="cursor: pointer;"> Mon
                      </label>
                      <label class="day-checkbox"
                        style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                        <input type="checkbox" value="2" style="cursor: pointer;"> Tue
                      </label>
                      <label class="day-checkbox"
                        style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                        <input type="checkbox" value="3" style="cursor: pointer;"> Wed
                      </label>
                      <label class="day-checkbox"
                        style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                        <input type="checkbox" value="4" style="cursor: pointer;"> Thu
                      </label>
                      <label class="day-checkbox"
                        style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                        <input type="checkbox" value="5" style="cursor: pointer;"> Fri
                      </label>
                      <label class="day-checkbox"
                        style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                        <input type="checkbox" value="6" style="cursor: pointer;"> Sat
                      </label>
                    </div>
                  </div>

                  <!-- Timezone Type -->
                  <div>
                    <label style="display: block; font-size: 13px; color: #666; margin-bottom: 4px;">Timezone</label>
                    <select class="schedule-timezone-type"
                      style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                      <option value="USER">User's Timezone</option>
                      <option value="ADVERTISER">Account Timezone</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <button class="create-adset-btn">Create Ad Set</button>
        </div>
      </div>
      <!-- Creative Upload -->
      <div class="creative-upload" style="display: none">
        <h2>Creative Upload</h2>

        <div class="upload-steps-container">
          <!-- File upload area -->
          <div class="upload-step" data-step="2">
            <div class="file-drop-zone">
              <p class="drop-zone-text">Drag & drop <strong>images and videos</strong> here <br /><br />or</p>
              <input type="file" multiple accept="image/*,video/*" />
              <button class="continue-btn">Browse Files</button>
              <div class="gdrive-input-container">
                <p style="margin: 15px 0 10px 0; color: #666; font-size: 14px;">or</p>
                <div style="display: flex; align-items: center; gap: 8px; max-width: 400px; margin: 0 auto;">
                  <input type="text" class="gdrive-link-input" placeholder="Paste Google Drive link..."
                    style="flex: 1; padding: 8px 12px; font-size: 14px;">
                  <button class="gdrive-fetch-btn"
                    style="padding: 8px 12px; background: #103dee; color: white; border: none;  cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 14px;">
                    <img src="icons/drive-icon.svg" alt="Drive" style="width: 16px; height: 16px;">
                    Fetch
                  </button>
                </div>
              </div>
              <div class="creative-library-link-container" style="margin-top: 15px;">
                <p style="margin: 10px 0; color: #666; font-size: 14px;">or</p>
                <button class="open-library-btn"
                  style="padding: 10px 20px; background: #28a745; color: white; border: none; cursor: pointer; font-size: 14px;">
                  üìö Browse Creative Library
                </button>
              </div>
            </div>
          </div>

          <!-- Step 3: Uploaded files list -->
          <div class="upload-step" data-step="3" style="display: none">
            <div class="uploaded-files-list">
              <!-- Files will be populated here -->
            </div>

            <button class="continue-btn">Upload Creatives</button>
            <button class="back-btn" style="margin-top: 15px">‚Üê Clear All Files</button>
          </div>
        </div>
      </div>

      <!-- Insert Ad Copy -->
      <div class="ad-copy-container" style="display: none">
        <h2>Editing Ad Copy for All 5 Images</h2>
        <div class="adset-form-container">
          <textarea placeholder="Primary Text*" required rows="6"></textarea>
          <input type="text" placeholder="Headline*" required />
          <!-- Page dropdown -->
          <div class="dropdown-container">
            <div class="custom-dropdown">
              <div class="dropdown-selected" data-dropdown="page">
                <span class="dropdown-display">Page*</span>
                <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                  <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </div>
              <ul class="dropdown-options pages">
              </ul>
            </div>
          </div>
          <!-- Call to Action dropdown -->
          <div class="dropdown-container">
            <div class="custom-dropdown">
              <div class="dropdown-selected" data-dropdown="cta">
                <span class="dropdown-display">Learn more</span>
                <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                  <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </div>
              <ul class="dropdown-options cta">
                <li class="cta-option" data-value="">No button</li>
                <li class="cta-option" data-value="BUY_TICKETS">Buy tickets</li>
                <li class="cta-option" data-value="CONTACT_US">Contact us</li>
                <li class="cta-option" data-value="DOWNLOAD">Download</li>
                <li class="cta-option" data-value="GET_OFFER">Get offer</li>
                <li class="cta-option" data-value="GET_QUOTE">Get quote</li>
                <li class="cta-option" data-value="GET_SHOWTIMES">Get showtimes</li>
                <li class="cta-option selected" data-value="LEARN_MORE">Learn more</li>
                <li class="cta-option" data-value="LISTEN_NOW">Listen now</li>
                <li class="cta-option" data-value="ORDER_NOW">Order now</li>
                <li class="cta-option" data-value="PLAY_GAME">Play game</li>
                <li class="cta-option" data-value="REQUEST_TIME">Request time</li>
                <li class="cta-option" data-value="SEE_MENU">See menu</li>
                <li class="cta-option" data-value="SHOP_NOW">Shop now</li>
                <li class="cta-option" data-value="SIGN_UP">Sign up</li>
                <li class="cta-option" data-value="SUBSCRIBE">Subscribe</li>
                <li class="cta-option" data-value="WATCH_MORE">Watch more</li>
                <li class="cta-option" data-value="APPLY_NOW">Apply now</li>
                <li class="cta-option" data-value="BOOK_NOW">Book now</li>
              </ul>
            </div>
          </div>
          <input type="url" placeholder="Destination URL*" required />
          <input type="text" placeholder="Description" class="adcopy-description" />
          <button>Continue to Review</button>
        </div>
      </div>

      <!-- Review & Create Ads -->
      <div class="create-ads-container" style="display: none">
        <h2>Review &amp; Create Ads</h2>
        <div class="review-container">
          <h3>Ad Set: Auto Test 1</h3>
          <!-- Display creatives for review -->
          <div class="data-container-creatives">
            <div class="images">
            </div>
            <!-- Display ad copy for review -->

            <div class="adcopy-text-review">
              <h3>Primary Text:</h3>
              <div class="primary-text-review-container primary">
                <p>
                  I hate my neighbor. And not for any of the usual reasons...
                </p>
              </div>
            </div>
            <div class="headline-review">
              <h3>Headline:</h3>
              <div class="headline-review-container">
                <p>Check out the site now ‚ûú</p>
              </div>
            </div>

            <div class="adcopy-text-review">
              <h3>Page:</h3>
              <div class="cta-text-review-container page">
                <p></p>
              </div>
            </div>

            <div class="adcopy-text-review">
              <h3>Call to Action:</h3>
              <div class="cta-text-review-container cta">
                <p>LEARN_MORE</p>
              </div>
            </div>

            <div class="adcopy-text-review">
              <h3>Destination URL:</h3>
              <div class="cta-text-review-container link">
                <p>https://emptylink.com</p>
              </div>
            </div>

            <div class="adcopy-text-review">
              <h3>Description:</h3>
              <div class="cta-text-review-container description">
                <p></p>
              </div>
            </div>
          </div>
        </div>
        <button class="create-ads-button">Create Ads</button>
        <!-- <button class="bulk-upload-ads-button" style="margin-top: 10px; background: #28a745;">Bulk Upload Ads to Multiple Accounts</button> -->
      </div>

      <!-- Success Screen -->
      <div class="success-wrapper" style="display: none">
        <h2>Success!</h2>

        <div class="success-container">
          <p>5 Ads Successfully Created</p>
          <img src="icons/icons8-tick.svg" />

          <button>View in Ads Manager</button>
          <h3>Create More Ads</h3>
        </div>
      </div>
    </div>
  </div>

  <!-- Duplicate Ad Set Dialog -->
  <div class="duplicate-adset-dialog" style="display: none;">
    <div class="dialog-content">
      <button class="dialog-close-btn">&times;</button>
      <h3>Duplicate Ad Set</h3>
      <div class="duplicate-step" data-step="1">
        <p>Do you want to delete the existing ads from the ad set <strong>(recommended)</strong>?</p>
        <div class="button-group">
          <!-- IZAK - these deep copy values are reversed. deep copy = true is throwing error still.  -->
          <button class="btn-secondary" data-deep-copy="true">No, Copy Ads</button>
          <button class="btn-primary" data-deep-copy="false">Yes, Delete Ads</button>
        </div>
      </div>
      <div class="duplicate-step" data-step="2" style="display: none;">
        <p>What do you want to name the new ad set?</p>
        <input type="text" id="duplicate-adset-name" placeholder="Enter ad set name">
        <div class="button-group">
          <button class="btn-secondary duplicate-back">Back</button>
          <button class="btn-primary duplicate-proceed" disabled>Proceed</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Duplicate Campaign Dialog -->
  <div class="duplicate-campaign-dialog" style="display: none;">
    <div class="dialog-content">
      <button class="dialog-close-btn">&times;</button>
      <h3>Duplicate Campaign</h3>
      <div class="duplicate-step" data-step="1">
        <p>Do you want to delete all ad sets and ads from this campaign <strong>(recommended)</strong>?</p>
        <div class="button-group">
          <button class="btn-secondary" data-deep-copy="true">No, Copy Everything</button>
          <button class="btn-primary" data-deep-copy="false">Yes, Delete Everything</button>
        </div>
      </div>
      <div class="duplicate-step" data-step="2" style="display: none;">
        <p>What do you want to name the new campaign?</p>
        <input type="text" id="duplicate-campaign-name" placeholder="Enter campaign name">
        <div class="button-group">
          <button class="btn-secondary duplicate-back">Back</button>
          <button class="btn-primary duplicate-proceed" disabled>Proceed</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Campaign Dialog -->
  <div class="create-campaign-dialog" style="display: none;">
    <div class="dialog-content">
      <button class="dialog-close-btn">&times;</button>
      <h3>Create New Campaign</h3>
      <div class="create-campaign-form">
        <input type="text" id="create-campaign-name" placeholder="Campaign Name*" required>

        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-objective">
              <span class="dropdown-display">Campaign Objective*</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-objective">
              <li data-value="OUTCOME_TRAFFIC">Traffic</li>
              <li data-value="OUTCOME_ENGAGEMENT">Engagement</li>
              <li data-value="OUTCOME_LEADS">Leads</li>
              <li data-value="OUTCOME_SALES">Sales</li>
              <li data-value="OUTCOME_APP_PROMOTION">App Promotion</li>
              <li data-value="OUTCOME_AWARENESS">Awareness</li>
            </ul>
          </div>
        </div>

        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-status">
              <span class="dropdown-display">Status*</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-status">
              <li data-value="PAUSED">Paused</li>
              <li data-value="ACTIVE">Active</li>
            </ul>
          </div>
        </div>

        <!-- Budget Options - MOVED TO AD SET LEVEL -->
        <!-- <input type="number" id="create-campaign-daily-budget" placeholder="Daily Budget (Optional, e.g., 50 for $50)"
          step="0.01" min="0">
        <input type="number" id="create-campaign-lifetime-budget"
          placeholder="Lifetime Budget (Optional, e.g., 1000 for $1000)" step="0.01" min="0"> -->

        <!-- Bid Strategy dropdown - MOVED TO AD SET LEVEL -->
        <!-- <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-bid-strategy">
              <span class="dropdown-display">Bid Strategy (Optional)</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-bid-strategy">
              <li data-value="">None</li>
              <li data-value="LOWEST_COST_WITHOUT_CAP">Lowest Cost Without Cap</li>
              <li data-value="LOWEST_COST_WITH_BID_CAP">Lowest Cost With Bid Cap</li>
              <li data-value="COST_CAP">Cost Cap</li>
              <li data-value="LOWEST_COST_WITH_MIN_ROAS">Lowest Cost With Min ROAS</li>
            </ul>
          </div>
        </div> -->

        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-special-categories">
              <span class="dropdown-display">Special Ad Categories (Optional)</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-special-categories" data-multiple="true">
              <li data-value="">None - If none of the categories apply</li>
              <li data-value="EMPLOYMENT">Employment</li>
              <li data-value="HOUSING">Housing</li>
              <li data-value="FINANCIAL_PRODUCTS_SERVICES">Financial Products & Services</li>
              <li data-value="ISSUES_ELECTIONS_POLITICS">Issues, Elections, Politics</li>
              <li data-value="ONLINE_GAMBLING_AND_GAMING">Online Gambling & Gaming</li>
            </ul>
          </div>
        </div>

        <!-- Special Ad Category Country dropdown -->
        <div class="dropdown-container">
          <div class="custom-dropdown">
            <div class="dropdown-selected" data-dropdown="campaign-special-country">
              <span class="dropdown-display">Special Ad Category Country (Optional)</span>
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="#666" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </div>
            <ul class="dropdown-options campaign-special-country" data-multiple="true">
              <li data-value="">None</li>
              <!-- Countries will be populated dynamically from fb-locations.json -->
            </ul>
          </div>
        </div>

        <div class="button-group">
          <button class="btn-secondary campaign-cancel">Cancel</button>
          <button class="btn-primary campaign-create" disabled>Create Campaign</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bulk Upload Ads Modal -->
  <div class="bulk-upload-modal" style="display: none;">
    <div class="modal-content bulk-upload-content">
      <div class="modal-header">
        <h2>Bulk Upload Ads to Multiple Accounts</h2>
        <button class="modal-close-btn bulk-upload-close">&times;</button>
      </div>

      <div class="bulk-upload-body">
        <!-- Step 1: Select Accounts -->
        <div class="bulk-step" data-step="1">
          <h3>Step 1: Select Ad Accounts</h3>
          <p class="step-description">Choose one or more ad accounts to create ads in</p>

          <div class="account-selection-container">
            <div class="search-box">
              <input type="text" class="account-search" placeholder="Search accounts..." />
            </div>
            <div class="account-list">
              <!-- Accounts will be populated dynamically -->
            </div>
          </div>

          <div class="bulk-actions">
            <button class="btn-secondary bulk-select-all">Select All</button>
            <button class="btn-secondary bulk-deselect-all">Deselect All</button>
            <button class="btn-primary bulk-start-upload" disabled>Start Bulk Upload</button>
          </div>
        </div>

        <!-- Step 2: Upload Progress -->
        <div class="bulk-step" data-step="2" style="display: none;">
          <h3>Step 2: Uploading Ads</h3>
          <p class="step-description">Creating ads across multiple accounts...</p>

          <div class="bulk-progress-container">
            <div class="overall-progress">
              <h4>Overall Progress</h4>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
              </div>
              <p class="progress-text">0 of 0 accounts completed</p>
            </div>

            <div class="account-progress-list">
              <!-- Individual account progress will be shown here -->
            </div>
          </div>

          <div class="bulk-actions" style="display: none;">
            <button class="btn-primary bulk-close-modal">Close</button>
          </div>
        </div>

        <!-- Step 3: Results -->
        <div class="bulk-step" data-step="3" style="display: none;">
          <h3>Bulk Upload Complete!</h3>

          <div class="bulk-results-container">
            <div class="results-summary">
              <div class="result-stat success">
                <span class="stat-number">0</span>
                <span class="stat-label">Ads Created</span>
              </div>
              <div class="result-stat failed">
                <span class="stat-number">0</span>
                <span class="stat-label">Failed</span>
              </div>
              <div class="result-stat accounts">
                <span class="stat-number">0</span>
                <span class="stat-label">Accounts</span>
              </div>
            </div>

            <div class="results-details">
              <h4>Details by Account</h4>
              <div class="results-list">
                <!-- Detailed results will be shown here -->
              </div>
            </div>
          </div>

          <div class="bulk-actions">
            <button class="btn-primary bulk-close-modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Creative Library Modal -->
  <div class="creative-library-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Creative Library</h2>
        <div class="modal-header-buttons">
          <button class="clear-all-btn">Delete ALL ‚ö†Ô∏è</button>
          <button class="modal-close-btn">&times;</button>
        </div>
      </div>

      <div class="library-controls">
        <div class="library-view-toggle">
          <button class="view-toggle-btn active" data-view="creatives">All Creatives</button>
          <!-- <button class="view-toggle-btn" data-view="batches">Batches</button> -->
        </div>
        <div class="library-search-container">
          <input type="text" class="library-search" placeholder="Search creatives..." />
        </div>
      </div>

      <div class="library-filters">
        <label class="filter-checkbox">
          <input type="checkbox" id="filter-new" checked>
          <span>New</span>
        </label>
        <label class="filter-checkbox">
          <input type="checkbox" id="filter-uploaded" checked>
          <span>Already in Account</span>
        </label>
        <label class="filter-checkbox">
          <input type="checkbox" id="filter-videos" checked>
          <span>Videos</span>
        </label>
        <label class="filter-checkbox">
          <input type="checkbox" id="filter-images" checked>
          <span>Images</span>
        </label>
      </div>
      <!-- 
      <div class="batch-actions" style="display: none;">
        <button class="create-batch-btn">+ Create New Batch</button>
        <div class="batch-breadcrumb" style="display: none;">
          <span class="breadcrumb-item">All Batches</span>
          <span class="breadcrumb-separator">‚Ä∫</span>
          <span class="breadcrumb-current"></span>
        </div>
      </div> -->

      <div class="library-grid-container">
        <div class="library-grid">
          <!-- Creative items will be dynamically loaded here -->
        </div>
        <div class="library-loading" style="display: none;">
          <p>Loading creatives...</p>
        </div>
        <div class="library-empty" style="display: none;">
          <p>No creatives found in library</p>
        </div>
      </div>

      <div class="library-selected-info">
        <span class="selected-count">0 selected</span>
        <button class="add-selected-btn" disabled>Add Selected Creatives</button>
      </div>
    </div>
  </div>

  <!-- Automated Rules Modal -->
  <div class="automated-rules-modal" style="display: none;">
    <div class="modal-content rules-modal-content">
      <div class="modal-header">
        <h2>Automated Rules</h2>
        <div class="modal-header-buttons">
          <button class="btn-primary create-multi-rule-btn">+ Create Rule for Multiple Account</button>
          <button class="modal-close-btn">&times;</button>
        </div>
      </div>

      <div class="modal-body">
        <!-- Account selector -->
        <div class="rules-account-selector">
          <label>Ad Account:</label>
          <select class="rules-account-dropdown">
            <option value="">Select an account...</option>
          </select>
          <button class="btn-secondary load-rules-btn" style="margin-left: 10px;">Load Rules</button>
          <button class="btn-primary create-rule-btn">+ Create Rule for Single Account</button>
        </div>

        <!-- Rules list -->
        <div class="rules-list-container">
          <table class="rules-table">
            <thead>
              <tr>
                <th>Rule Name</th>
                <th>Entity Type</th>
                <th>Status</th>
                <th>Schedule</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody class="rules-list">
              <tr class="empty-state">
                <td colspan="5">No rules found. Create a rule to get started.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Create/Edit Rule Modal -->
  <div class="rule-editor-modal" style="display: none;">
    <div class="modal-content rule-editor-content">
      <div class="modal-header">
        <h2 class="rule-editor-title">Create Automated Rule</h2>
        <button class="modal-close-btn">&times;</button>
      </div>

      <div class="modal-body">
        <form class="rule-form">
          <!-- Rule Name -->
          <div class="form-group">
            <label for="rule-name">Rule Name*</label>
            <input type="text" id="rule-name" class="form-input" placeholder="e.g., Stop Loss Rule" required />
          </div>

          <!-- Rule Type -->
          <div class="form-group">
            <label>Rule Type*</label>
            <div class="rule-type-selector">
              <label class="radio-label">
                <input type="radio" name="rule-type" value="SCHEDULE" checked />
                <span>Schedule - Run at specific times</span>
              </label>
              <!-- <label class="radio-label">
                <input type="radio" name="rule-type" value="TRIGGER" />
                <span>Trigger - Run based on stats changes</span>
              </label> -->
            </div>
          </div>

          <!-- Apply Rule To -->
          <div class="form-group">
            <label>Apply Rule To*</label>
            <select id="rule-entity-type" class="form-select" required>
              <option value="">Select entity type...</option>
              <option value="CAMPAIGN">All Active Campaigns</option>
              <option value="ADSET">All Active Ad Sets</option>
              <option value="AD">All Active Ads</option>
            </select>
          </div>

          <!-- Action Section -->
          <div class="form-section">
            <h3>Action*</h3>
            <select id="rule-action-type" class="form-select" required>
              <option value="">Select action...</option>
              <option value="PAUSE">Turn off (Pause)</option>
              <option value="UNPAUSE">Turn on (Unpause)</option>
              <option value="SEND_NOTIFICATION">Send notification only</option>
              <option value="CHANGE_BUDGET">Adjust budget</option>
              <option value="CHANGE_BID">Adjust manual bid</option>
            </select>

            <!-- Budget change options (hidden by default) -->
            <div class="budget-change-options" style="display: none;">
              <div class="form-row">
                <div class="form-group">
                  <label>Change Type</label>
                  <select id="budget-change-type" class="form-select">
                    <option value="INCREASE">Increase daily budget by</option>
                    <option value="DECREASE">Decrease daily budget by</option>
                    <!-- <option value="SET">Set daily budget to</option> -->
                    <option value="INCREASE_LIFETIME">Increase lifetime budget by</option>
                    <option value="DECREASE_LIFETIME">Decrease lifetime budget by</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Unit</label>
                  <select id="budget-unit" class="form-select">
                    <option value="CURRENCY">Dollar amount ($)</option>
                    <option value="PERCENTAGE">Percentage (%)</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Amount</label>
                  <input type="number" id="budget-amount" class="form-input" placeholder="0.00" step="0.01" min="0" />
                </div>
              </div>
            </div>

            <!-- Bid change options (hidden by default) -->
            <div class="bid-change-options" style="display: none;">
              <div class="form-row">
                <div class="form-group">
                  <label>Change Type</label>
                  <select id="bid-change-type" class="form-select">
                    <option value="INCREASE">Increase bid by</option>
                    <option value="DECREASE">Decrease bid by</option>
                    <option value="SET">Set bid to</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Unit</label>
                  <select id="bid-unit" class="form-select">
                    <option value="CURRENCY">Dollar amount ($)</option>
                    <option value="PERCENTAGE">Percentage (%)</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label>Amount</label>
                <input type="number" id="bid-amount" class="form-input" placeholder="0.00" step="0.01" min="0" />
              </div>
            </div>
          </div>

          <!-- Conditions Section -->
          <div class="form-section">
            <h3>Conditions</h3>
            <p class="form-help-text">All conditions must be met (AND logic)</p>
            <div class="conditions-container">
              <!-- Conditions will be added dynamically -->
            </div>
            <button type="button" class="btn-secondary add-condition-btn">+ Add Condition</button>
          </div>

          <!-- Time Range Section -->
          <div class="form-section">
            <h3>Time Range*</h3>
            <select id="rule-time-range" class="form-select" required>
              <option value="TODAY" selected>Today</option>
              <option value="YESTERDAY">Yesterday</option>
              <option value="LAST_3D">Last 3 days</option>
              <option value="LAST_7D">Last 7 days</option>
              <option value="LAST_14D">Last 14 days</option>
              <option value="LAST_28D">Last 28 days</option>
              <option value="LAST_30D">Last 30 days</option>
              <option value="THIS_MONTH">This month</option>
              <option value="THIS_WEEK_MON_TODAY">This week (Mon-Today)</option>
              <option value="THIS_WEEK_SUN_TODAY">This week (Sun-Today)</option>
              <option value="LIFETIME">Lifetime</option>
            </select>
            <p class="form-help-text">Note: Some ad metrics can be delayed and would fluctuate for hours. Consider
              adding some buffers to your metric-based conditions to help avoid false positives.</p>
          </div>

          <!-- Schedule Section -->
          <div class="form-section schedule-section">
            <h3>Schedule*</h3>
            <select id="rule-schedule-frequency" class="form-select" required>
              <option value="CONTINUOUSLY">Continuously (Run every 30-60 minutes)</option>
              <option value="DAILY">Daily (Start 12 AM)</option>
              <option value="CUSTOM">Custom</option>
            </select>

            <!-- Custom schedule options (hidden by default) -->
            <div class="custom-schedule-options" style="display: none;">
              <div class="form-group">
                <label>Days of Week</label>
                <div class="days-selector">
                  <label class="day-checkbox"><input type="checkbox" value="0" /> Sun</label>
                  <label class="day-checkbox"><input type="checkbox" value="1" /> Mon</label>
                  <label class="day-checkbox"><input type="checkbox" value="2" /> Tue</label>
                  <label class="day-checkbox"><input type="checkbox" value="3" /> Wed</label>
                  <label class="day-checkbox"><input type="checkbox" value="4" /> Thu</label>
                  <label class="day-checkbox"><input type="checkbox" value="5" /> Fri</label>
                  <label class="day-checkbox"><input type="checkbox" value="6" /> Sat</label>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label>Start Time</label>
                  <input type="time" id="schedule-start-time" class="form-input" />
                </div>
                <div class="form-group">
                  <label>End Time</label>
                  <input type="time" id="schedule-end-time" class="form-input" />
                </div>
              </div>
            </div>
          </div>

          <!-- Subscribers Section -->
          <!-- <div class="form-section">
            <h3>Subscriber</h3>
            <p class="form-help-text">Only people with access to this ad account can receive rule results.</p>
            <select id="rule-subscribers" class="form-select">
              <option value="">Select subscriber...</option>
            </select>
            <p class="form-help-text" style="font-size: 12px; margin-top: 5px;">Note: You'll receive a notification when
              conditions for this rule have been met.</p>
          </div> -->

          <!-- JSON Preview -->
          <!-- <div class="form-section">
            <h3>JSON Preview</h3>
            <pre class="json-preview"><code>{}</code></pre>
          </div> -->
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-secondary cancel-rule-btn">Cancel</button>
        <button type="button" class="btn-primary save-rule-btn">Create Rule</button>
      </div>
    </div>
  </div>

  <!-- Account Selector Modal (for multi-account rule creation) -->
  <div class="account-selector-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Select Ad Accounts</h2>
        <button class="modal-close-btn">&times;</button>
      </div>

      <div class="modal-body">
        <p class="modal-description">Choose which accounts to create this rule on:</p>

        <!-- Select All / Deselect All -->
        <div class="account-selector-controls">
          <button type="button" class="btn-link select-all-accounts">Select All</button>
          <button type="button" class="btn-link deselect-all-accounts">Deselect All</button>
        </div>

        <!-- Account Checklist -->
        <div class="account-checklist">
          <!-- Dynamically populated with checkboxes -->
        </div>

        <p class="form-help-text" style="margin-top: 15px;">
          Selected: <strong class="selected-count">0</strong> accounts
        </p>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-secondary cancel-account-selector">Cancel</button>
        <button type="button" class="btn-primary next-to-rule-editor">Next: Configure Rule</button>
      </div>
    </div>
  </div>

  <!-- Batch Progress Modal -->
  <div class="batch-progress-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Creating Rules...</h2>
      </div>

      <div class="modal-body">
        <p class="progress-description">Creating rule on multiple accounts. Please wait...</p>

        <!-- Progress Bar -->
        <div class="progress-bar-container">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
          <p class="progress-text"><strong class="completed-count">0</strong> of <strong class="total-count">0</strong>
            accounts completed</p>
        </div>

        <!-- Detailed Results Per Account -->
        <div class="batch-results-list">
          <!-- Dynamically populated -->
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-secondary close-progress" disabled>Close</button>
      </div>
    </div>
  </div>

  <!-- Batch Results Summary Modal -->
  <div class="batch-results-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Rule Creation Summary</h2>
        <button class="modal-close-btn">&times;</button>
      </div>

      <div class="modal-body">
        <div class="results-summary">
          <div class="result-stat success-stat">
            <div class="stat-icon">‚úì</div>
            <div class="stat-content">
              <div class="stat-number success-count">0</div>
              <div class="stat-label">Succeeded</div>
            </div>
          </div>

          <div class="result-stat failed-stat">
            <div class="stat-icon">‚úó</div>
            <div class="stat-content">
              <div class="stat-number failed-count">0</div>
              <div class="stat-label">Failed</div>
            </div>
          </div>
        </div>

        <!-- Detailed Results List -->
        <div class="detailed-results">
          <h4>Detailed Results:</h4>
          <div class="results-list">
            <!-- Dynamically populated -->
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-primary close-results">Done</button>
      </div>
    </div>
  </div>

  <script src="error-handler.js"></script>
  <script src="script.js"></script>
  <script>
    setTimeout(() => {
      if (typeof setupMetaDataUpdates === 'function') {
        setupMetaDataUpdates()
      }
    }, 1000)
  </script>
</body>

</html>